{"version":3,"file":"index.js","sources":["../../node_modules/decamelize/index.js","../../node_modules/humanize-string/index.js","../../src/index.js"],"sourcesContent":["'use strict';\nmodule.exports = function (str, sep) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tsep = typeof sep === 'undefined' ? '_' : sep;\n\n\treturn str\n\t\t.replace(/([a-z\\d])([A-Z])/g, '$1' + sep + '$2')\n\t\t.replace(/([A-Z]+)([A-Z][a-z\\d]+)/g, '$1' + sep + '$2')\n\t\t.toLowerCase();\n};\n","'use strict';\nvar decamelize = require('decamelize');\n\nmodule.exports = function (str) {\n\tif (typeof str !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\tstr = decamelize(str);\n\tstr = str.toLowerCase().replace(/[_-]+/g, ' ').replace(/\\s{2,}/g, ' ').trim();\n\tstr = str.charAt(0).toUpperCase() + str.slice(1);\n\n\treturn str;\n};\n","/**\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * This script exports a HOC that accepts a routes array of objects\n * and an options object.\n *\n * API:\n *\n * withBreadcrumbs(\n *   routes?: Array<Route>,\n *   options? Object<Options>,\n * ): HigherOrderComponent\n *\n * More Info:\n *\n * https://github.com/icd2k3/react-router-breadcrumbs-hoc\n *\n */\n\nimport { createElement } from 'react';\nimport { matchPath, withRouter } from 'react-router';\nimport humanizeString from 'humanize-string';\n\nconst DEFAULT_MATCH_OPTIONS = { exact: true };\nconst NO_BREADCRUMB = 'NO_BREADCRUMB';\n\n/**\n * Renders and returns the breadcrumb complete\n * with `match`, `location`, and `key` props.\n */\nconst render = ({\n  /**\n   * extracting `component` here to avoid an invalid attribute warning\n   * see: https://github.com/icd2k3/react-router-breadcrumbs-hoc/issues/59\n   * This is actually a symptom of a larger issue with this current\n   * functionality of passing route data (needed for breadcrumb rendering)\n   * as props on the component itself. This has the unintended side-effect\n   * of rendering those props as element attributes in the DOM.\n   * TODO: Refactor this render logic (and probably the API) to not render\n   * those props as attributes on the breadcrumb element.\n   */\n  component,\n\n  breadcrumb,\n  match,\n  location,\n  ...rest\n}) => {\n  const componentProps = { match, location, key: match.url, ...rest };\n  if (typeof breadcrumb === 'function') {\n    return createElement(breadcrumb, componentProps);\n  }\n  return createElement('span', componentProps, breadcrumb);\n};\n\n\n/**\n * Small helper method to get a default `humanize-string`\n * breadcrumb if the user hasn't provided one.\n*/\nconst getDefaultBreadcrumb = ({ pathSection, currentSection, location }) => {\n  const match = matchPath(pathSection, { ...DEFAULT_MATCH_OPTIONS, path: pathSection });\n\n  return render({\n    breadcrumb: humanizeString(currentSection),\n    match,\n    location,\n  });\n};\n\n/**\n * Loops through the route array (if provided) and returns either a\n * user-provided breadcrumb OR a sensible default (if enabled) via `humanize-string`.\n*/\nconst getBreadcrumb = ({\n  currentSection,\n  disableDefaults,\n  excludePaths,\n  location,\n  pathSection,\n  routes,\n}) => {\n  let breadcrumb;\n\n  // Check the optional `exludePaths` option in `options` to see if the\n  // current path should not include a breadcrumb.\n  if (excludePaths && excludePaths.includes(pathSection)) {\n    return NO_BREADCRUMB;\n  }\n\n  // Loop through the route array and see if the user has provided a custom breadcrumb.\n  routes.some(({ breadcrumb: userProvidedBreadcrumb, matchOptions, path, ...rest }) => {\n    if (!path) {\n      throw new Error('withBreadcrumbs: `path` must be provided in every route object');\n    }\n\n    const match = matchPath(pathSection, { ...(matchOptions || DEFAULT_MATCH_OPTIONS), path });\n\n    // If user passed breadcrumb: null OR custom match options to suppress a breadcrumb\n    // we need to know NOT to add it to the matches array\n    // see: `if (breadcrumb !== NO_BREADCRUMB)` below.\n    if ((match && userProvidedBreadcrumb === null) || (!match && matchOptions)) {\n      breadcrumb = NO_BREADCRUMB;\n      return true;\n    }\n\n    if (match) {\n      // This covers the case where a user may be extending their react-router route\n      // config with breadcrumbs, but also does not want default breadcrumbs to be\n      // automatically generated (opt-in).\n      if (!userProvidedBreadcrumb && disableDefaults) {\n        breadcrumb = NO_BREADCRUMB;\n        return true;\n      }\n\n      breadcrumb = render({\n        // Although we have a match, the user may be passing their react-router config object\n        // which we support. The route config object may not have a `breadcrumb` param specified.\n        // If this is the case, we should provide a default via `humanizeString`.\n        breadcrumb: userProvidedBreadcrumb || humanizeString(currentSection),\n        match,\n        location,\n        ...rest,\n      });\n      return true;\n    }\n    return false;\n  });\n\n  // User provided a breadcrumb prop, or we generated one via `humanize-string` above.\n  if (breadcrumb) {\n    return breadcrumb;\n  }\n\n  // If there was no breadcrumb provided and user has disableDefaults turned on.\n  if (disableDefaults) {\n    return NO_BREADCRUMB;\n  }\n\n  // If the above conditionals don't fire, generate a default breadcrumb based on the path.\n  return getDefaultBreadcrumb({\n    pathSection,\n    // include a \"Home\" breadcrumb by default (can be overrode or disabled in config).\n    currentSection: pathSection === '/' ? 'Home' : currentSection,\n    location,\n  });\n};\n\n/**\n * Splits the pathname into sections, then search for matches in the routes\n * a user-provided breadcrumb OR a sensible default via `humanize-string`.\n*/\nexport const getBreadcrumbs = ({ routes, location, options = {} }) => {\n  const matches = [];\n  const { pathname } = location;\n\n  pathname\n    .split('?')[0]\n    // Remove trailing slash \"/\" from pathname.\n    .replace(/\\/$/, '')\n    // Split pathname into sections.\n    .split('/')\n    // Reduce over the sections and call `getBreadcrumb()` for each section.\n    .reduce((previousSection, currentSection) => {\n      // Combine the last route section with the currentSection.\n      // For example, `pathname = /1/2/3` results in match checks for\n      // `/1`, `/1/2`, `/1/2/3`.\n      const pathSection = !currentSection ? '/' : `${previousSection}/${currentSection}`;\n\n      const breadcrumb = getBreadcrumb({\n        currentSection,\n        location,\n        pathSection,\n        routes,\n        ...options,\n      });\n\n      // Add the breadcrumb to the matches array\n      // unless the user has explicitly passed.\n      // { path: x, breadcrumb: null } to disable.\n      if (breadcrumb !== NO_BREADCRUMB) {\n        matches.push(breadcrumb);\n      }\n\n      return pathSection === '/' ? '' : pathSection;\n    }, null);\n\n  return matches;\n};\n\n/**\n * Takes a route array and recursively flattens it IF there are\n * nested routes in the config.\n*/\nconst flattenRoutes = routes => routes.reduce((arr, route) => {\n  if (route.routes) {\n    return arr.concat([route, ...flattenRoutes(route.routes)]);\n  }\n  return arr.concat(route);\n}, []);\n\nexport default (routes = [], options) => Component => withRouter(props => createElement(Component, {\n  ...props,\n  breadcrumbs: getBreadcrumbs({\n    routes: flattenRoutes(routes),\n    location: props.location,\n    options,\n  }),\n}));\n"],"names":["DEFAULT_MATCH_OPTIONS","exact","NO_BREADCRUMB","render","component","breadcrumb","match","location","rest","componentProps","key","url","createElement","getDefaultBreadcrumb","pathSection","currentSection","matchPath","path","humanizeString","getBreadcrumb","disableDefaults","excludePaths","routes","includes","some","userProvidedBreadcrumb","matchOptions","Error","getBreadcrumbs","options","matches","pathname","split","replace","reduce","previousSection","push","flattenRoutes","arr","route","concat","Component","withRouter","props","breadcrumbs"],"mappings":"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"}